#!/bin/bash

X2GO_VERSIONS_BASEPATH="../share/x2go/versions"

get_version() {
	cat "$1" | egrep -v "^#.*" | head -n1 | cut -d" " -f1
}

if [ -n "$1" ]; then
	X2GO_COMPONENT="$1"
	X2GO_COMPONENT_VERFILE="${X2GO_VERSIONS_BASEPATH}/VERSION.${X2GO_COMPONENT}"

	if [ -f "${X2GO_COMPONENT_VERFILE}" ]; then
		echo "$(get_version ${X2GO_COMPONENT_VERFILE})"
	else
		echo "Version information for X2go component '$X2GO_COMPONENT' is not available." >&1
	fi
else
	cd ${X2GO_VERSIONS_BASEPATH}
	for compfile in `ls`; do 
		X2GO_COMPONENT="$(echo $compfile | cut -d"." -f2)"
		X2GO_COMPONENT_VERSION="$(get_version $compfile)"
		echo "${X2GO_COMPONENT}: ${X2GO_COMPONENT_VERSION}"
	done
	cd -
fi

